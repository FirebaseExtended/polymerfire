<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="firebase.html">
<link rel="import" href="carbon-firebase-common-behavior.html">
<script>
  (function() {
    'use strict';

    Polymer.CarbonFirebaseAuthBehaviorImpl = {
      properties: {
        auth: {
          type: Object,
          computed: '__computeAuth(app)'
        },

        signedIn: {
          type: Boolean,
          computed: '__computeSignedIn(user)'
        },

        user: {
          type: Object,
          readOnly: true,
          value: null
        }
      },

      signIn: function() {
        if (!this.auth) {
          return Promise.reject('No app configured for auth!');
        }

        return this._attemptSignIn();
      },

      signOut: function() {
        if (!this.auth) {
          return Promise.reject('No app configured for auth!');
        }

        return this.auth.signOut();
      },

      _attemptSignIn: function() {
        return Promise.resolve();
      },

      __computeSignedIn: function(user) {
        return !!user;
      },

      __computeAuth: function(app) {
        return app.auth();
      },
    };

    Polymer.CarbonFirebaseAuthBehavior = [
      Polymer.CarbonFirebaseCommonBehavior,
      Polymer.CarbonFirebaseAuthBehaviorImpl
    ];
  })();
</script>
