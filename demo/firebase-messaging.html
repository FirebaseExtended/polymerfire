<!doctype html>

<html>
  <head>
    <title>firebase-messaging demo</title>
    <link rel="manifest" href="manifest.json">
    <link rel="import" href="../firebase-app.html">
    <link rel="import" href="../firebase-messaging.html">
  </head>
  <body>
    <template is="dom-bind" id="app">
      <firebase-app
        api-key="AIzaSyDTP-eiQezleFsV2WddFBAhF_WEzx_8v_g"
        auth-domain="polymerfire-test.firebaseapp.com",
        database-url="https://polymerfire-test.firebaseio.com"
        storage-bucket="polymerfire-test.appspot.com"
        messaging-sender-id="630461474709"></firebase-app>
      <firebase-messaging id="messaging"
        active="{{active}}"
        token="{{token}}"
        status-known="{{statusKnown}}"
        last-message="{{lastMessage}}">
      </firebase-messaging>

      <div hidden$="[[!statusKnown]]">
        <button hidden$="[[active]]" on-click="requestMessaging">Request Notifications Permission</button>
        <table hidden$="[[!active]]" border="1" cellpadding="8">
          <tr><th>Token</th><td>[[token]]</td></tr>
          <tr><th>Last Message:</th><td><pre>[[json(lastMessage)]]</pre></td></tr>
        </table>
      </div>
    </template>
    <script>
      var app = document.getElementById('app');
      app.requestMessaging = function() {
        return app.$.messaging.requestPermission();
      }

      app.json = function(val) {
        return JSON.stringify(val || null, null, 2);
      }

    </script>
  </body>
</html>
